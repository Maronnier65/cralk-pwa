/* Basic reset and styling */
:root {
  --primary-color: #5f4bc2;
  --secondary-color: #9f67cc;
  --accent-color: #ff66b3;
  --background-color: #0d0c1b;
  --text-color: #ffffff;
  --card-background: #1f1d30;
}

* {
  box-sizing: border-box;
}

/*
 * Styles for the camera‑first interface. The page occupies the full
 * viewport and presents the live camera feed with overlay controls
 * reminiscent of the native iPhone camera app.
 */

body,
html {
  margin: 0;
  padding: 0;
  height: 100%;
  background: var(--background-color);
  color: var(--text-color);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
}

#app-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Camera preview occupies the full available space */
#camera-preview {
  width: 100%;
  height: 100%;
  object-fit: cover;
  background: #000;
}

/* Overlay container covers the full view but allows underlying video to show */
.overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  /* Push overlay content to the bottom */
  justify-content: flex-end;
  padding: 0;
  pointer-events: none;
}

/* Bottom controls are fixed at the bottom of the viewport and span its width. They remain
   anchored in place when the device rotates. The layout uses space‑around to evenly
   distribute the buttons. */
.bottom-controls {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 0.6rem;
  gap: 0.6rem;
  pointer-events: auto;
}

/* Only show top-controls if present (not used currently) */
.top-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  pointer-events: auto;
}

/* Generic button styles */
.icon-button,
.record-button {
  pointer-events: auto;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-color);
  font-size: 0.8rem;
  transition: background 0.3s;
  background: rgba(255, 255, 255, 0.12);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 14px;
  backdrop-filter: blur(10px);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
  padding: 0.6rem 0.8rem;
}

/* Icon element inside bottom control buttons */
.icon-button .icon {
  font-size: 1.3rem;
}

/* Record button icon: draw a small circle in the centre */
.record-button .record-icon {
  width: 1.4rem;
  height: 1.4rem;
  border-radius: 50%;
  background: currentColor;
  display: block;
}

/* Specific sizing: icon buttons are square, record button is circular and larger */
.icon-button {
  min-width: 44px;
  min-height: 44px;
  justify-content: center;
}
.record-button {
  min-width: 68px;
  min-height: 68px;
  border-radius: 50%;
  background: var(--accent-color);
  color: #fff;
}
.record-button.recording {
  background: red;
}

/* Hover state */
.icon-button:hover,
.record-button:hover {
  background: rgba(255, 255, 255, 0.22);
}

/* Disabled state */
.icon-button:disabled,
.record-button:disabled {
  opacity: 0.5;
}

/* Top bar contains the song selector, file name and timer */
.top-bar {
  position: absolute;
  top: 0.5rem;
  left: 0.5rem;
  right: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.4rem 0.6rem;
  background: rgba(0, 0, 0, 0.6);
  color: #ffffff;
  border-radius: 8px;
  backdrop-filter: blur(8px);
  pointer-events: auto;
}

/* Top button (music note) */
.top-button {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-color);
  font-size: 1.2rem;
  /* Give the music selector a more obvious button style */
  background: rgba(255, 255, 255, 0.12);
  border: 1px solid rgba(255, 255, 255, 0.25);
  padding: 0.4rem 0.6rem;
  border-radius: 10px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

/* Icon inside the top button */
.top-icon {
  font-size: 1.4rem;
}

/* File info text within the top bar */
.top-bar #file-info {
  flex: 1;
  margin: 0 0.5rem;
  font-size: 0.9rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: left;
}

/* Song timer text within the top bar */
.top-bar #song-timer {
  font-size: 0.9rem;
  min-width: 3rem;
  text-align: right;
  display: none; /* Hidden until a song is selected */
}

/* Countdown overlay for pre‑song countdown */
.countdown-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 5rem;
  color: #ffffff;
  background: rgba(0, 0, 0, 0.5);
  z-index: 10;
}

/* Recorded video and download area */
#recordings {
  margin: 1rem;
}

/* Recorded videos are hidden by default and will be displayed when the user
   selects a recording. Always preserve aspect ratio and limit the height so
   they fit comfortably on the screen. */
.recorded-video {
  /* Recorded videos always preserve their aspect ratio and never exceed the
     available width or a 60vh height. The element itself is hidden by
     default via the hidden attribute set by JavaScript. */
  width: 100%;
  height: auto;
  max-height: 60vh;
  object-fit: contain;
  border-radius: 8px;
  background: #000;
  margin-top: 0.5rem;
}

/* Hide the recorded video when the `hidden` attribute is present. When
   the hidden attribute is removed (via JavaScript), the default block
   display is restored so the video becomes visible. */
.recording-item video[hidden] {
  display: none;
}

/* Adjust recorded video size based on orientation. In portrait
   orientation, limit height to 60vh and allow width to scale; in
   landscape, use full width and auto height. */
.recorded-video.portrait {
  width: auto;
  height: 60vh;
}
.recorded-video.landscape {
  width: 100%;
  height: auto;
}

.download-link {
  display: block;
  margin-top: 0.5rem;
  color: var(--accent-color);
  text-decoration: none;
}

/* Gallery recording items */
.recording-item {
  width: 100%;
  margin-bottom: 1rem;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(6px);
}

.recording-info {
  font-size: 0.85rem;
  color: #ffffff;
  margin-bottom: 0.4rem;
  text-align: left;
}

/* ----- Multi‑screen navigation ----- */
/* Container that holds both screens; slides horizontally when the gallery is active */
#screen-container {
  display: flex;
  width: 200%;
  height: 100%;
  transition: transform 0.4s ease;
}

/* When the app container has the 'gallery-active' class, shift to show the gallery */
#app-container.gallery-active #screen-container {
  transform: translateX(-50%);
}

/* Each screen takes up half the width */
.screen {
  width: 50%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

/* Gallery screen layout */
.gallery-screen {
  background: var(--background-color);
  color: var(--text-color);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 1rem;
}

/* Rotate button labels based on orientation. In portrait, no rotation; in landscape,
   rotate the label 90 degrees so the text aligns with the longer side. */
.btn-label {
  display: block;
  transform-origin: center;
  white-space: nowrap;
}
body.landscape .btn-label {
  transform: rotate(90deg);
}

.gallery-title {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

#gallery-recordings {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-y: auto;
}

/* Grouping for left and right buttons in the bottom controls */
.left-buttons,
  .right-buttons {
  display: flex;
  align-items: center;
  /* Increase spacing slightly between each icon button to avoid crowding */
  gap: 0.5rem;
}