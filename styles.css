/* Basic reset and styling */
:root {
  --primary-color: #5f4bc2;
  --secondary-color: #9f67cc;
  --accent-color: #ff66b3;
  --background-color: #0d0c1b;
  --text-color: #ffffff;
  --card-background: #1f1d30;
}

* {
  box-sizing: border-box;
}

/*
 * Styles for the camera‑first interface. The page occupies the full
 * viewport and presents the live camera feed with overlay controls
 * reminiscent of the native iPhone camera app.
 */

body,
html {
  margin: 0;
  padding: 0;
  height: 100%;
  background: var(--background-color);
  color: var(--text-color);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
}

#app-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Camera preview occupies the full available space */
#camera-preview {
  width: 100%;
  height: 100%;
  object-fit: cover;
  background: #000;
}

/* Overlay container covers the full view but allows underlying video to show */
.overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  /* Push overlay content to the bottom */
  justify-content: flex-end;
  padding: 0;
  pointer-events: none;
}

/* Bottom controls are fixed at the bottom of the viewport and span its width. They remain
   anchored in place when the device rotates. The layout uses space‑around to evenly
   distribute the buttons. */
.bottom-controls {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 0.6rem;
  gap: 0.6rem;
  pointer-events: auto;
}

/* Only show top-controls if present (not used currently) */
.top-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  pointer-events: auto;
}

/* Generic button styles: uniform round icons with translucent dark background */
.icon-button,
.record-button {
  pointer-events: auto;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #ffffff;
  background: rgba(0, 0, 0, 0.75);
  transition: background 0.3s;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
}

/* Icon buttons: small square size and fully round */
.icon-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  padding: 0;
}

/* Record button: slightly larger but still round; contains a red dot inside */
.record-button {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  padding: 0;
}

/* Inner red dot for the record button */
.record-button .record-icon {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #e74c3c; /* red */
  display: block;
}

/* When recording, tint the record button red for clarity */
.record-button.recording {
  background: rgba(255, 0, 0, 0.8);
}

/* Disabled state for buttons: lower opacity */
.icon-button:disabled,
.record-button:disabled {
  opacity: 0.5;
}

/* Top bar contains the song selector, file name and timer */
/* Top bar for the song selector and timer: slim strip with semi‑transparent background */
.top-bar {
  position: absolute;
  top: 0.3rem;
  left: 0.5rem;
  right: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.15rem 0.4rem;
  background: rgba(0, 0, 0, 0.75);
  color: #ffffff;
  border-radius: 6px;
  backdrop-filter: blur(8px);
  pointer-events: auto;
}

/* Top button (music note) */
/* Music selector button shares the same look as the icon buttons */
.top-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.75);
  color: #ffffff;
  border: none;
  padding: 0;
  pointer-events: auto;
  cursor: pointer;
}

/* Icon inside the top button */
/* Icon inside top music button inherits size from svg; no explicit font size needed */

/* File info text within the top bar */
.top-bar #file-info {
  flex: 1;
  margin: 0 0.3rem;
  font-size: 0.8rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: left;
}

/* Song timer text within the top bar */
.top-bar #song-timer {
  font-size: 0.8rem;
  min-width: 2.5rem;
  text-align: right;
  display: none; /* Hidden until a song is selected */
}

/* Countdown overlay for pre‑song countdown */
.countdown-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 5rem;
  color: #ffffff;
  background: rgba(0, 0, 0, 0.5);
  z-index: 10;
}

/* Recorded video and download area */
#recordings {
  margin: 1rem;
}

/* Recorded videos are hidden by default and will be displayed when the user
   selects a recording. Always preserve aspect ratio and limit the height so
   they fit comfortably on the screen. */
/* Recorded video element: preserve aspect ratio and fit within the container.
   Always take full width and scale height accordingly. */
.recorded-video {
  width: 100%;
  height: auto;
  object-fit: contain;
  border-radius: 8px;
  background: #000;
  margin-top: 0.5rem;
}

/* Hide the recorded video when the `hidden` attribute is present. When
   the hidden attribute is removed (via JavaScript), the default block
   display is restored so the video becomes visible. */
/* Hide the recorded video when hidden and remove extra margin */
.recording-item video[hidden] {
  display: none;
  margin-top: 0;
}

/* Adjust recorded video size based on orientation. In portrait
   orientation, limit height to 60vh and allow width to scale; in
   landscape, use full width and auto height. */
/* Remove orientation‑specific sizing; rely on object-fit */
.recorded-video.portrait {
  width: 100%;
  height: auto;
}
.recorded-video.landscape {
  width: 100%;
  height: auto;
}

.download-link {
  display: block;
  margin-top: 0.5rem;
  color: var(--accent-color);
  text-decoration: none;
}

/* Gallery recording items */
.recording-item {
  width: 100%;
  margin-bottom: 1rem;
  padding: 0.5rem;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(6px);
}

/* Container that holds the recorded video and download link; hidden by default */
.recording-item div + div {
  width: 100%;
  margin-top: 0.5rem;
}


.recording-info {
  font-size: 0.85rem;
  color: #ffffff;
  margin-bottom: 0.4rem;
  text-align: left;
  cursor: pointer;
}

/* ----- Multi‑screen navigation ----- */
/* Container that holds both screens; slides horizontally when the gallery is active */
#screen-container {
  display: flex;
  width: 200%;
  height: 100%;
  transition: transform 0.4s ease;
}

/* When the app container has the 'gallery-active' class, shift to show the gallery */
#app-container.gallery-active #screen-container {
  transform: translateX(-50%);
}

/* Each screen takes up half the width */
.screen {
  width: 50%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

/* Gallery screen layout */
.gallery-screen {
  background: var(--background-color);
  color: var(--text-color);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 1rem;
}

/* Controls at the top of the gallery page */
.gallery-controls {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}
.gallery-controls .icon-button {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.75);
  color: #ffffff;
  border: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
}
.gallery-controls .icon-button:disabled {
  opacity: 0.5;
}

/* Rotate button labels based on orientation. In portrait, no rotation; in landscape,
   rotate the label 90 degrees so the text aligns with the longer side. */
.btn-label {
  display: block;
  transform-origin: center;
  white-space: nowrap;
}
body.landscape .btn-label {
  transform: rotate(90deg);
}

.gallery-title {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

#gallery-recordings {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-y: auto;
}

/* Grouping for left and right buttons in the bottom controls */
.left-buttons,
  .right-buttons {
  display: flex;
  align-items: center;
  /* Increase spacing slightly between each icon button to avoid crowding */
  gap: 0.5rem;
}